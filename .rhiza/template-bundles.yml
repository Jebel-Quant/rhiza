# Bundle Definitions
bundles:
  # ============================================================================
  # TESTS - Testing infrastructure with pytest, coverage, and type checking
  # ============================================================================
  tests:
    description: "Testing infrastructure with pytest, coverage, and type checking"
    standalone: true
    requires: []
    files:
      # Make targets and configuration
      - .rhiza/utils/version_matrix.py
      - .rhiza/make.d/01-test.mk
      - .rhiza/requirements/tests.txt
      - pytest.ini

      # Core test infrastructure
      - tests/test_rhiza/__init__.py
      - tests/test_rhiza/conftest.py
      - tests/test_rhiza/README.md

      # Core/generic test files
      - tests/test_rhiza/test_structure.py
      - tests/test_rhiza/test_docstrings.py
      - tests/test_rhiza/test_makefile.py
      - tests/test_rhiza/test_makefile_api.py
      - tests/test_rhiza/test_makefile_gh.py
      - tests/test_rhiza/test_git_repo_fixture.py
      - tests/test_rhiza/test_readme.py
      - tests/test_rhiza/test_rhiza_workflows.py
      - tests/test_rhiza/test_release_script.py
      - tests/test_rhiza/test_version_matrix.py

      # GitHub Actions workflows
      - .github/workflows/rhiza_ci.yml
      - .github/workflows/rhiza_mypy.yml
      - .github/workflows/rhiza_security.yml
      - .github/workflows/rhiza_codeql.yml

  # ============================================================================
  # MARIMO - Interactive Marimo notebooks
  # ============================================================================
  marimo:
    description: "Interactive Marimo notebooks for data exploration and documentation"
    standalone: true
    requires: []
    files:
      # Marimo configuration
      - .rhiza/make.d/03-marimo.mk
      - .rhiza/requirements/marimo.txt

      # Marimo notebooks directory
      - book/marimo

      # Marimo-specific tests
      - tests/test_rhiza/test_marimushka_target.py
      - tests/test_rhiza/test_notebooks.py

      # Documentation
      - docs/MARIMO.md

      # GitHub Actions workflows
      - .github/workflows/rhiza_marimo.yml

  # ============================================================================
  # BOOK - Documentation book generation
  # ============================================================================
  book:
    description: |
      Comprehensive documentation book generation combining:
      - API documentation (pdoc)
      - Test coverage reports
      - Test results
      - Interactive notebooks (if marimo is enabled)
    standalone: false
    requires:
      - tests  # Required: book needs test coverage and reports
    recommends:
      - marimo  # Optional: book works better with notebook exports
    files:
      # Book building configuration
      - .rhiza/make.d/02-book.mk
      - .rhiza/templates/minibook

      # Book-specific tests
      - tests/test_rhiza/test_book.py

      # Documentation
      - docs/BOOK.md

      # GitHub Actions workflows
      - .github/workflows/rhiza_book.yml
